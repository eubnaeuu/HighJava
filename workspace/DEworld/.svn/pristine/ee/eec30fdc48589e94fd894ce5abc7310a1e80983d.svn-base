/**
 * 
 */
$(document).ready(function(){
	startCheck();
});


function startCheck(){
	var userAuth = sessionStorage.getItem("nowLogin");
	if(userAuth == null){
		alert("확인되지않은 세션 정보입니다. \n로그인 페이지로 이동합니다.");
		window.location.href = "http://localhost/DEworld/html/loginpage/login.html";
	}else{
		ShowNicknameUser();
	}
}

function ShowNicknameUser(){
	var memNickname = $("#WriteUser").val();
	
	var param = {
			memNickname : memNickname
			 ,flag : "NI"
			};
	
	$.ajax({
		url : "/DEworld/AdminroomServlet"
		,type : "post"
		,data : param
		,dataType : "json"
		,success : function(data){
			makeTable(data);
			
		}
	,error : function(request,status, error){
		alert("code:" + request.status+ "\n\r" 
		+ "message: " + request.responseText +"\n\r"
		+ "error : " + error);
		}
	});
}



function makeTable(data){
	$("#MemberList tbody").empty();
	
	var str = "";
	
	if(data.length== 0){
		str += "<tr><td colspan='4' style='text-align: center;'>데이터가없습니다</td></tr>";
	}
	
		for(var i=0 ; i<data.length ; i++) {
			str += "<tr>"
				+ "<td>" + data[i].memName + "(" + data[i].memId + ")" + "</td>"
				+ "<td>" + data[i].memNickname + "</td>"
				+ "<td><button type='button' value='"+ data[i].memId  +"' class='btn btn-primary btn-lg raised btnSize' onclick='showUserData(this)';>유저정보</button></td>"
				+ "<td><button type='button' value='"+ data[i].memId  +"' class='btn btn-primary btn-lg raised btnSize' onclick='goMiniHompi(this)'>미니홈피보기</button></td>"
				+ "</tr>";
		}
		$("#MemberList tbody").html(str);
}
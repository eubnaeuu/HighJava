<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap
			PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
			"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="post">

	<insert id="insertPost" parameterClass="kr.or.ddit.post.vo.PostVO">

	INSERT INTO POST
	(
	POST_NO 		   
	,HOMPI_ID         
	,LPOST_GU         
	,MEM_ID           
	,POST_TITLE       
	,POST_CONTENT     
<!-- 	,POST_DATE         -->
<!-- 	,POST_VIEW         -->
	)
	VALUES
	(
	#postNo#
	,#hompiId#
	,#lpostGu#
	,#memId#
	,#postTitle#
	,#postContent#
<!-- 	,#postDate# -->
<!-- 	,#postView# -->
	)                   
	</insert>
	
	<update id="updatePost" parameterClass="kr.or.ddit.post.vo.PostVO">
		UPDATE POST
         SET 
         POST_VIEW = 0
          <isNotEmpty property="postTitle">
          ,POST_TITLE = #postTitle#
          </isNotEmpty>
          <isNotEmpty property="postContent">
          ,POST_Content = #postContent#
          </isNotEmpty>
<!--           <isNotEmpty property="atchFileId"> -->
<!--           ,ATCH_FILE_ID = #atchFileId# -->
<!--           </isNotEmpty> -->
	 	WHERE post_NO = #postNo#
	</update>
	
	<delete id="deletePost" parameterClass="String">
		DELETE 
		FROM post
		WHERE post_NO = #postNo#
	</delete>
	
	<select id="getPostAll" resultClass="kr.or.ddit.post.vo.PostVO">
		SELECT
		POST_NO 		   postNo
		,HOMPI_ID         	hompiId
		,LPOST_GU         	lpostGu
		,MEM_ID           	memId
		,POST_TITLE       	postTitle
		,POST_CONTENT     	postContent
		,POST_DATE        	postDate
		,POST_VIEW        	postView
		FROM POST
<!-- 		,ATCH_FILE_ID 		atchFileId -->
	</select>
	
	<select id="getSearchPost" parameterClass="kr.or.ddit.post.vo.PostVO" resultClass="kr.or.ddit.post.vo.PostVO">
	
	SELECT P.*,
	 F.ATCH_FILE_ID
	FROM POST P, ATCH_FILE_DETAIL F
	WHERE 1 = 1
	AND F.ATCH_FILE_ID = (SELECT ATCH_FILE_ID FROM ATCH_FILE WHERE POST_NO = #postNo#)
	<isNotEmpty property="postNo">
           AND POST_NO = #postNo#
	 </isNotEmpty>
	 
<!-- 	 <isNotEmpty property="postTitle"> -->
<!--            AND post_TITLE = #postTitle# -->
<!-- 	 </isNotEmpty> -->

<!-- 	 SELECT -->
<!-- 		POST_NO 		   postNo -->
<!-- 		,HOMPI_ID         	hompiId -->
<!-- 		,LPOST_GU         	lpostGu -->
<!-- 		,MEM_ID           	memId -->
<!-- 		,POST_TITLE       	postTitle -->
<!-- 		,POST_CONTENT     	postContent -->
<!-- 		,POST_ATTACHMENTS 	postAttachments -->
<!-- 		,POST_DATE        	postDate -->
<!-- 		,POST_VIEW        	postView -->
<!-- 		 FROM post -->
<!-- 	 where 1=1 -->
<!-- 	 <isNotEmpty property="postNo"> -->
<!--            AND POST_NO = #postNo# -->
<!-- 	 </isNotEmpty> -->
<!-- 	 <isNotEmpty property="postTitle"> -->
<!--            AND post_TITLE = #postTitle# -->
<!-- 	 </isNotEmpty> -->
	</select>
</sqlMap>			


